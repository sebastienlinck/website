function fcookie(){if(!0===window.cookieAccepted||document.cookie&&document.cookie.includes("__Secure-cookieDef"))return;const e=document.querySelector("#cookie");if(!e)return;setTimeout(()=>{e.classList.add("show")},1e3);const t=document.querySelector("#cookie-button");t&&t.addEventListener("click",o=>{e.classList.remove("show");const n=t.getAttribute("href")||t.dataset.acceptUrl;n&&(window.location.href=n)})}function convertNumberToWords(e){const t=["zéro","un","deux","trois","quatre","cinq","six","sept","huit","neuf"];return t[e]}function generateCaptcha(){const e=document.getElementById("captcha-question"),t=document.getElementById("refresh-captcha");if(!e||!t)return;const o=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),a=["plus","moins","fois"],s=a[Math.floor(Math.random()*a.length)];let r,c;switch(s){case"plus":r=o+n;break;case"moins":r=o-n;break;case"fois":r=o*n;break;default:r=0}switch(s){case"plus":c=`${convertNumberToWords(o)} plus ${convertNumberToWords(n)}`;break;case"moins":c=`${convertNumberToWords(o)} moins ${convertNumberToWords(n)}`;break;case"fois":c=`${convertNumberToWords(o)} fois ${convertNumberToWords(n)}`;break;default:c=""}e.textContent=c,e.dataset.solution=r,t.addEventListener("click",generateCaptcha,{once:!0})}function showStatusMessage(e,t,o){if(!o)return;const n=document.createElement("div");n.className=`status-message ${t}`,n.textContent=e,o.appendChild(n),setTimeout(()=>{n&&n.parentNode&&n.parentNode.removeChild(n)},5e3)}window.addEventListener("load",fcookie),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle"),t=document.documentElement,o=localStorage.getItem("theme");o?t.setAttribute("data-theme",o):window.matchMedia("(prefers-color-scheme: dark)").matches&&t.setAttribute("data-theme","dark"),e&&e.addEventListener("click",()=>{const e=t.getAttribute("data-theme"),o="dark"===e?"light":"dark";t.setAttribute("data-theme",o),localStorage.setItem("theme",o)})}),document.addEventListener("DOMContentLoaded",()=>{generateCaptcha();const e=document.getElementById("contact-form");e&&e.addEventListener("submit",async function(e){e.preventDefault();const t=e.target,o=new FormData(t),n=document.getElementById("status-message"),a=document.getElementById("captcha"),s=document.getElementById("captcha-question");if(a&&s){const e=parseInt(a.value),t=parseInt(s.dataset.solution);if(isNaN(e)||e!==t)return showStatusMessage("Veuillez résoudre correctement le calcul CAPTCHA.","error",n),void generateCaptcha()}n&&(n.innerHTML="");try{const e=await fetch("contact.php",{method:"POST",body:o}),a=await e.json();a.success?(showStatusMessage(a.message,"success",n),t.reset(),generateCaptcha()):showStatusMessage(a.message,"error",n)}catch(e){showStatusMessage("Erreur technique lors de l'envoi du message.","error",n)}})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("[data-reset-form]");e.forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-reset-form"),t=document.getElementById(e);t&&(t.reset(),generateCaptcha())})})});