function fcookie(){if(!0===window.cookieAccepted||document.cookie&&document.cookie.includes("__Secure-cookieDef"))return;const e=document.querySelector("#cookie");if(!e)return;setTimeout(()=>{e.classList.add("show")},1e3);const t=document.querySelector("#cookie-button");t&&t.addEventListener("click",o=>{e.classList.remove("show");const n=t.getAttribute("href")||t.dataset.acceptUrl;n&&(window.location.href=n)})}function convertNumberToWords(e){const t=["zéro","un","deux","trois","quatre","cinq","six","sept","huit","neuf"];return t[e]}function showStatusMessage(e,t,o){if(!o)return;const n="success"===t?"var(--cobalt)":"var(--magenta)",a="var(--soft-purple)";o.innerHTML=`\n    <div style="padding: 1rem; border-radius: var(--radius); margin-bottom: 1rem; \n                text-align: center; font-weight: bold; background: ${n}; color: ${a};">\n      ${e}\n    </div>\n  `}function generateCaptcha(){const e=document.getElementById("captcha-question"),t=document.getElementById("refresh-captcha");if(!e||!t)return;const o=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),a=["plus","moins","fois"],r=a[Math.floor(Math.random()*a.length)];let c,s;switch(r){case"plus":c=o+n,s=`${convertNumberToWords(o)} plus ${convertNumberToWords(n)}`;break;case"moins":c=o-n,s=`${convertNumberToWords(o)} moins ${convertNumberToWords(n)}`;break;case"fois":c=o*n,s=`${convertNumberToWords(o)} fois ${convertNumberToWords(n)}`;break;default:c=0,s=""}e.textContent=s,e.dataset.solution=c,t.addEventListener("click",generateCaptcha,{once:!0})}function checkCaptchaAndUpdateButton(){const e=document.getElementById("captcha"),t=document.querySelector("#captcha-question"),o=document.getElementById("envoyer-contact");if(e&&t&&o){const n=parseInt(e.value),a=parseInt(t.dataset.solution);return isNaN(n)||n!==a?(o.disabled=!0,!1):(o.disabled=!1,!0)}return!1}window.addEventListener("load",fcookie),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle"),t=document.documentElement,o=localStorage.getItem("theme");o?t.setAttribute("data-theme",o):window.matchMedia("(prefers-color-scheme: dark)").matches&&t.setAttribute("data-theme","dark"),e&&e.addEventListener("click",()=>{const e=t.getAttribute("data-theme"),o="dark"===e?"light":"dark";t.setAttribute("data-theme",o),localStorage.setItem("theme",o)})}),document.addEventListener("DOMContentLoaded",()=>{generateCaptcha();const e=document.getElementById("contact-form"),t=document.getElementById("envoyer-contact");if(e&&t){t.disabled=!0;const o=document.getElementById("captcha");o&&o.addEventListener("input",checkCaptchaAndUpdateButton),e.addEventListener("submit",async function(e){if(e.preventDefault(),checkCaptchaAndUpdateButton()){const o=e.target,n=new FormData(o);n.append("envoyer","1");const a=document.getElementById("status-message");a&&(a.innerHTML="");try{const e=await fetch("sendmail.php",{method:"POST",body:n});if(!e.ok)throw new Error("Erreur réseau");const r=await e.json();r.success?(showStatusMessage(r.message,"success",a),o.reset(),generateCaptcha(),t.disabled=!0):showStatusMessage(r.message,"error",a)}catch(e){showStatusMessage("Erreur technique lors de l'envoi du message.","error",a)}}})}});