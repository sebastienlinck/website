function fcookie(){if(!0===window.cookieAccepted||document.cookie&&document.cookie.includes("__Secure-cookieDef"))return;const e=document.querySelector("#cookie");if(!e)return;setTimeout(()=>{e.classList.add("show")},1e3);const t=document.querySelector("#cookie-button");t&&t.addEventListener("click",n=>{e.classList.remove("show");const o=t.getAttribute("href")||t.dataset.acceptUrl;o&&(window.location.href=o)})}function convertNumberToWords(e){const t=["zéro","un","deux","trois","quatre","cinq","six","sept","huit","neuf"];return t[e]}function showStatusMessage(e,t,n){if(!n)return;const o="success"===t?"var(--deep-purple)":"var(--magenta)",a="success"===t?"var(--soft-purple)":"var(--soft-pink)";n.innerHTML=`\n    <div style="padding: 1rem; border-radius: var(--radius); margin-bottom: 1rem; \n                text-align: center; font-weight: bold; background: ${o}; color: ${a};">\n      ${e}\n    </div>\n  `}function generateCaptcha(){const e=document.getElementById("captcha-question"),t=document.getElementById("refresh-captcha");if(!e||!t)return;let n=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());const a=["plus","moins","fois"],c=a[Math.floor(Math.random()*a.length)];let s;"moins"===c&&n<o&&([n,o]=[o,n]);let r=`${convertNumberToWords(n)} ${c} ${convertNumberToWords(o)}`;s="plus"===c?n+o:"moins"===c?n-o:n*o,e.textContent=r,e.dataset.solution=s;let d=document.getElementById("contact-form");document.getElementById("captcha_op")?(document.getElementsByName("c_n1")[0].value=n,document.getElementsByName("c_n2")[0].value=o,document.getElementsByName("c_op")[0].value=c):d.insertAdjacentHTML("beforeend",`<input type="hidden" name="c_n1" value="${n}"><input type="hidden" name="c_n2" value="${o}"><input type="hidden" name="c_op" value="${c}">`)}function checkCaptchaAndUpdateButton(){const e=document.getElementById("captcha"),t=document.querySelector("#captcha-question"),n=document.getElementById("envoyer-contact");if(e&&t&&n){const o=parseInt(e.value),a=parseInt(t.dataset.solution);return isNaN(o)||o!==a?(n.disabled=!0,!1):(n.disabled=!1,!0)}return!1}window.addEventListener("load",fcookie),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle"),t=document.documentElement,n=localStorage.getItem("theme");n?t.setAttribute("data-theme",n):window.matchMedia("(prefers-color-scheme: dark)").matches&&t.setAttribute("data-theme","dark"),e&&e.addEventListener("click",()=>{const e=t.getAttribute("data-theme"),n="dark"===e?"light":"dark";t.setAttribute("data-theme",n),localStorage.setItem("theme",n)})}),document.addEventListener("DOMContentLoaded",()=>{generateCaptcha();const e=document.getElementById("contact-form"),t=document.getElementById("envoyer-contact");if(e&&t){t.disabled=!0;const n=document.getElementById("captcha");n&&n.addEventListener("input",checkCaptchaAndUpdateButton),e.addEventListener("submit",async function(e){if(e.preventDefault(),checkCaptchaAndUpdateButton()){const n=e.target,o=new FormData(n);o.append("envoyer","1");const a=document.getElementById("status-message");a&&(a.innerHTML="");try{const e=await fetch("./pages/sendmail.php",{method:"POST",body:o});if(!e.ok)throw new Error("Erreur réseau");const c=await e.json();c.success?(showStatusMessage(c.message,"success",a),n.reset(),generateCaptcha(),t.disabled=!0):showStatusMessage(c.message,"error",a)}catch(e){showStatusMessage("Erreur technique lors de l'envoi du message.","error",a)}}})}});